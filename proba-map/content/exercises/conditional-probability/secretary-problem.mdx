---
id: "secretary-problem"
title: "The Secretary Problem"
difficulty: "Medium"
patterns: ["conditional-probability"]
tags:
    [
        "probability",
        "optimal-stopping",
        "secretary-problem",
        "riemann-sum",
        "asymptotics",
    ]
---

---

## Exercise

A company wants to hire the best candidate out of $N$ applicants. The candidates are interviewed one by one in a random order. After each interview, the company must immediately decide whether to hire or pass. A rejected candidate cannot be recalled. The company can only rank candidates relative to those already seen.

What strategy maximizes the probability of selecting the best candidate, and what is this maximum probability?

## Hints

<Hint n={1}>
    A natural class of strategies is: observe (reject) the first $r$ candidates,
    then pick the first candidate who beats everyone seen so far. Try analyzing
    this strategy first.
</Hint>

<Hint n={2}>
    Condition on the position $i$ of the best candidate. Given that the best is
    at position $i$, identify the event that prevents you from stopping before
    $i$.
</Hint>

## Solution

**Strategy:** Reject the first $r$ candidates (observation phase), then hire the first candidate who is better than all of the first $r$.

**Probability of winning with this strategy:**

Let us compute $P(\text{win})$, the probability that the best candidate is selected.

The best candidate is at position $i$ (uniformly at random). We win if:

1. The best candidate is at position $i \ge r+1$ (i.e. not in the observation phase), and
2. The best among the first $i-1$ candidates is among the first $r$ (so we don't stop early).

The probability of this, for a given $i$, is $\dfrac{r}{i-1}$. Therefore:

$$
P(\text{win})
= \sum_{i=r+1}^{N} \mathbb{P}(\text{best at position } i)\cdot
\mathbb{P}(\text{we don't stop before } i \mid \text{best at } i)
= \sum_{i=r+1}^{N} \frac{1}{N}\cdot \frac{r}{i-1}.
$$

So,

$$
P(\text{win})
= \frac{r}{N}\sum_{i=r+1}^{N}\frac{1}{i-1}
= \frac{r}{N}\sum_{j=r}^{N-1}\frac{1}{j}.
$$

**Reminder â€” Riemann integrals:**

For any continuous function $f$ on $[a,b]$:

$$
\sum_{k=0}^{n-1} f(a+k,\Delta t),\Delta t \xrightarrow[n\to\infty]{} \int_a^b f(t),dt
\qquad \text{with } \Delta t=\frac{b-a}{n}.
$$

**Passage to the limit:** Let $x=\dfrac{r}{N}$ and $n=N-r$. We have
$\Delta t=\dfrac{1-\frac{r}{N}}{N-r}=\dfrac{1}{N}$, and:

$$
P(x)
= \frac{r}{N}\sum_{j=0}^{n-1}\frac{1}{\frac{r}{N}+\frac{j}{N}}\cdot \frac{1}{N}
= x\sum_{j=0}^{n-1}\frac{\Delta t}{a+j,\Delta t},
$$

where $a=x$. As $N\to\infty$:

$$
P(x) \xrightarrow[N\to\infty]{} x\int_x^1 \frac{dt}{t}
= x\Big[-\ln(t)\Big]_x^1
= x(0-\ln(x))
= -x\ln(x).
$$

**Optimization:**

$$
P'(x) = -\ln(x)-1.
$$

Setting $P'(x)=0$:

$$
-\ln(x)-1=0 \implies \ln(x)=-1 \implies \boxed{x^*=\frac{1}{e}}.
$$

Therefore the optimal strategy is to reject the first $r^*=\dfrac{N}{e}$ candidates, then select the first one who is better than all previously seen.

The maximum probability of selecting the best candidate is:

$$
P(x^*) = -\frac{1}{e}\ln\left(\frac{1}{e}\right)
= \frac{1}{e}
\approx \boxed{36.8\%}.
$$
